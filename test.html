<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>document</title>
    <link rel="stylesheet" href="./test.css" />
  </head>
  <body>
    <div id="main-wrap"></div>
    <script>
      const data = [
        {
          id: 1,
          name: "김철수",
          age: 14,
          careers: [
            { title: "놀기" },
            { title: "먹기" },
            { title: "자기" },
            { title: "숨쉬기" },
          ],
          nickname: [
            { name: "김안철수" },
            { name: "김김안철수" },
            { name: "박터짐" },
          ],
        },
        {
          id: 2,
          name: "영희",
          age: 35,
          careers: [
            { title: "놀기" },
            { title: "자전거타기" },
            { title: "오렌지먹기" },
            { title: "사과부시기" },
          ],
          nickname: [
            { name: "김영희" },
            { name: "야생사자" },
            { name: "오올이" },
          ],
        },
        {
          id: 3,
          name: "박광철",
          age: 20,
          careers: [
            { title: "일수나가기" },
            { title: "돈빌려주기" },
            { title: "공무집행방해하기" },
            { title: "무면허운전하기" },
          ],
          nickname: [
            { name: "대흥역호랑이와사자두마리" },
            { name: "마포불주먹" },
            { name: "전설" },
            { name: "경찰의적" },
          ],
        },
      ];

      // 테이블 생성
      const tableWrap = document.querySelector("#main-wrap");
      tableWrap.innerHTML = `
      <table id="testTable">
          <thead>
          <tr>
              <th>이름</th>
              <th>나이</th>
              <th>커리어</th>
              <th>별명</th>
          </tr>
          </thead>
          <tbody class="tableBody"></tbody>
      </table>
      `;

      const tBody = document.querySelector("tbody");

      const rows = data
        .map((item) => {
          const careerList = item.careers.map((x) => x.title).join(", ");
          const nicknameList = item.nickname.map((x) => x.name).join(", ");

          return `
          <tr>
            <td>${item.name}</td>
            <td>${item.age}</td>
            <td>${careerList}</td>
            <td>${nicknameList}</td>
          </tr>
          `;
        })
        .join("");
      tBody.innerHTML = rows;

      function rowClicked() {
        const table = document.getElementById("testTable");
        const rowList = table.getElementsByTagName("tr");

        for (let i = 1; i < rowList.length; i++) {
          const row = rowList[i];
          row.onclick = function () {
            const name = row.cells[0].innerText;
            const age = row.cells[1].innerText;
            const careers = row.cells[2].innerText;
            const nicknames = row.cells[3].innerText;

            if (age >= 20) {
              alert(
                `해당하는 사람의 이름은 ${name}이고 나이는 ${age}이며 성인입니다. 커리어에는 ${careers}가 있고, 별명으로는 ${nicknames}이 있습니다.`
              );
            } else {
              alert(
                `해당하는 사람의 이름은 ${name}이고 나이는 ${age}이며 미성년자입니다. 커리어에는 ${careers}가 있고, 별명으로는 ${nicknames}이 있습니다.`
              );
            }
          };
        }
      }
      window.onload = rowClicked;

      // p 태그 만들기
      const table = document.getElementById("testTable");
      const rowList = table.getElementsByTagName("tr");

      for (let i = 1; i < rowList.length; i++) {
        const row = rowList[i];
        const name = row.cells[0].innerText;
        const age = parseInt(row.cells[1].innerText);
        const careers = row.cells[2].innerText;
        const nicknames = row.cells[3].innerText;

        let message = "";
        if (age >= 20) {
          message = `성인은 ${name}이고 나이는 ${age}입니다. 커리어에는 ${careers}가 있고, 별명으로는 ${nicknames}이 있습니다.`;
        } else {
          message = `미성년자는 ${name}이고 나이는 ${age}입니다. 커리어에는 ${careers}가 있고, 별명으로는 ${nicknames}이 있습니다.`;
        }

        const hello = document.createElement("p");
        const no1 = document.createTextNode(message);

        hello.appendChild(no1);

        document.body.appendChild(hello);
        function solution(s) {
          let answer = "";
          let maxLength = Number.MIN_SAFE_INTEGER;

          for (let i = 0; i < s.length; i++) {
            if (maxLength < s[i].length) {
              maxLength = s[i].length;
              answer = s[i];
            }
          }
          return answer;
        }
        console.log(solution(nicknames));
      }
    </script>
  </body>
</html>
